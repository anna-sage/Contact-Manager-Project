<!DOCTYPE html>
<html>
<head>
	<title>Cosmos</title>
	<script type="text/javascript" src="js/code.js"></script>
	<link href="css/contact.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=DM+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Load in the contacts associated with the user and reset forms. -->
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function()
		{
			readCookie();
			document.getElementById("navUser").innerHTML = firstName;
			displayContacts("");
			resetForm("add");
			resetForm("edit");
		}, false);
	</script>

</head>
<body>
	
	<header>
		<nav class="navbar navbar-expand-sm bg-light" id="nav">
			<div class="container-fluid">
				<!-- Logo and website name -->
				<ul class="navbar-nav flex-row">
					<li class="nav-item">
						<a href="contact.html" class="navbar-brand" style="color: rgb(75, 12, 102);">
							<img src="images/logo.png" alt="Logo" style="width:45px;" class="rounded-pill">
							cosmos
						</a>
					</li>
				</ul>
				<!-- First name and logout button -->
				<ul class="navbar-nav ms-auto">
					<li class="nav-item navbar-text">
						<span id="navUser">User</span>
					</li>
					<li class="nav-item">
						<button class="btn" type="button" id="logoutButton" onclick="doLogout();">
							<span class="material-symbols-outlined">logout</span>
							Log out
						</button>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<div id="accessUIDiv" class="justify-content-center" style="background-color: transparent;">
			<div class="container justify-content-center" style="margin-top: 1cm;">
				<!-- <h1 id="contactsTitle" class="container text-light">Contacts</h1> -->

				<div id="searchAddBar" class="nav d-flex bg-light">
					<div class="nav-item p-2 flex-grow-1 ms-2 mt-1" style="text-align: start;">
						<button id="addBtn" type="button" 
						class="btn rounded-pill searchAddItems" data-bs-toggle="modal" data-bs-target="#addModal">+ Add</button>
					</div>
					<div class="nav-item p-2">
						<div class="input-group mt-1">
							<input id="searchText" type="search" placeholder="Enter contact information" class="form-control searchAddItems" style="border: 1px solid black">
							<button id="searchBtn" class="btn searchAddItems" type="submit" 
							onclick="searchContacts();">
								Search
							</button>
						</div>
					</div>
					<div class="nav-item p-2 me-2 mt-1">
						<button id="clearBtn" type="button" class="btn rounded-pill searchAddItems" 
						onclick="clearSearch();">
							Clear
						</button>
					</div>
				</div>

				<!-- Add contacts dialogue box. -->
				<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
					  <div class="modal-content">
						<div class="modal-header">
						  <h5 class="modal-title" id="exampleModalLabel">New contact details</h5>
						  <button type="button" class="btn-close" aria-label="Close" onclick="resetForm('add');">
							<span aria-hidden="true" style="display: none;">&times;</span>
						  </button>
						</div>
						<div class="modal-body">
							<form id="addForm">
								<div class="mb-3">
									<span id="addFnameInvalid" class="material-symbols-outlined addInvalidIcon invalidIcon">
										warning
									</span>
									<label for="addFname" class="form-label">First name</label>
									<input id="addFname" type="text" placeholder="First name" class="form-control addInput" 
									oninput="this.value = formatName(this.value);" required>
									<div id="addFnameFeedback" class="addFeedback feedback">Required.</div>
								</div>
								<div class="mb-3">
									<span id="addLnameInvalid" class="material-symbols-outlined addInvalidIcon invalidIcon">
										warning
									</span>
									<label for="addLname" class="form-label">Last name</label>
									<input id="addLname" type="text" placeholder="Last name" class="form-control addInput" 
									oninput="this.value = formatName(this.value);">
								</div>
								<div class="mb-3">
									<span id="addPhNumInvalid" class="material-symbols-outlined addInvalidIcon invalidIcon">
										warning
									</span>
									<label for="addPhNum" class="form-label">Phone number</label>
									<input id="addPhNum" type="tel" placeholder="ex. 555-555-5555" class="form-control addInput" required>
									<div id="addPhNumFeedback" class="addFeedback feedback">Valid 10 digit phone number required.</div>
								</div>
								<div class="mb-3">
									<span id="addEmailInvalid" class="material-symbols-outlined addInvalidIcon invalidIcon">
										warning
									</span>
									<label for="addEmail" class="form-label">Email</label>
									<input id="addEmail" type="email" placeholder="ex. example@email.com" class="form-control addInput"
									oninput="this.value = this.value.toLowerCase();" required>
									<div id="addEmailFeedback" class="addFeedback feedback">Valid email address required.</div>
								</div>
							</form>
							<div id="addErr" class="mb-3" style="display: none;">
								<span class="material-symbols-outlined">
									warning
								</span>
								<span id="addErrMsg"></span>
							</div>
						</div>
						<div class="modal-footer d-flex justify-content-between">
						  <button type="button" class="btn modalCancel float-start" onclick="resetForm('add');">
							Cancel
						  </button>
						  <button type="submit" class="btn modalSubmit"
						  onclick="
						  if(validateContactForm('add','addFname', 'addPhNum', 'addEmail')) 
						  {
							addContact(); 
						  }">
						  	Submit
						</button>
						</div>
					  </div>
					</div>
				  </div>
			</div>

			<!-- Edit contacts dialogue box. -->
			<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
				  <div class="modal-content">
					<div class="modal-header">
					  <h5 class="modal-title" id="editModalTitle">Edit contact details
						<span class="material-symbols-outlined" id="modal-editIcon">edit</span>
					  </h5>
					  <button type="button" class="btn-close" aria-label="Close" onclick="closeModalForm('editModal', 'editForm');">
						<span aria-hidden="true" style="display: none;">&times;</span>
					  </button>
					</div>
					<div class="modal-body">
						<form id="editForm">
							<div class="mb-3">
								<span id="editFnameInvalid" class="material-symbols-outlined editInvalidIcon invalidIcon">
									warning
								</span>
								<label for="editFname" class="form-label">First name</label>
								<input id="editFname" type="text" placeholder="First name" class="form-control editInput" 
								oninput="this.value = formatName(this.value);" required>
								<div id="editFnameFeedback" class="editFeedback feedback">Required.</div>
							</div>
							<div class="mb-3">
								<span id="editLnameInvalid" class="material-symbols-outlined editInvalidIcon invalidIcon">
									warning
								</span>
								<label for="editLname" class="form-label">Last name</label>
								<input id="editLname" type="text" placeholder="Last name" class="form-control editInput" 
								oninput="this.value = formatName(this.value);">
							</div>
							<div class="mb-3">
								<span id="editPhNumInvalid" class="material-symbols-outlined editInvalidIcon invalidIcon">
									warning
								</span>
								<label for="editPhNum" class="form-label">Phone number</label>
								<input id="editPhNum" type="tel" placeholder="ex. 555-555-5555" class="form-control editInput" required>
								<div id="editPhNumFeedback" class="editFeedback feedback">Valid 10 digit phone number required.</div>
							</div>
							<div class="mb-3">
								<span id="editEmailInvalid" class="material-symbols-outlined editInvalidIcon invalidIcon">
									warning
								</span>
								<label for="editEmail" class="form-label">Email</label>
								<input id="editEmail" type="email" placeholder="ex. example@email.com" class="form-control editInput"
								oninput="this.value = this.value.toLowerCase();" required>
								<div id="editEmailFeedback" class="editFeedback feedback">Valid email address required.</div>
							</div>
						</form>
						<div id="editErr" class="mb-3" style="display: none;">
							<span class="material-symbols-outlined">
								warning
							</span>
							<span id="editErrMsg"></span>
						</div>
					</div>
					<div class="modal-footer">
					  <button type="button" class="btn modalCancel" onclick="closeModalForm('editModal', 'editForm');">
						Cancel
					  </button>
					  <button id="updateButton" type="submit" class="btn modalSubmit"
					  onclick="
					  if(validateContactForm('edit', 'editFname', 'editPhNum', 'editEmail')) 
					  {
						updateContact(); 
					  }">
						  Submit
					</button>
					</div>
				  </div>
				</div>
			  </div>
		</div>

			<!-- Container for contacts -->
			<div id="contactsDisplay" class="container mt-3">
				<table id="contacts" class="table table-striped table-borderless overflow-hidden my-1">
					<thead>
						<tr>
							<th></th>
							<th>First&nbspName</th>
							<th>Last&nbspName</th>
							<th>Phone</th>
							<th>Email</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody id="contactsBody" class="container align-middle">
					</tbody>
				</table>
				<div id="noResultsContainer">
					<h3 id="noResultsTxt" class="text-center" style="display: none;">
						No contacts found
					</h3>
				</div>
			</div>

		</div>
	</main>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<title>Cosmos</title>
	<script type="text/javascript" src="js/code.js"></script>
	<link href="css/contact.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=DM+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Load in the contacts associated with the user. -->
	
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function()
		{
			readCookie();
			document.getElementById("navUser").innerHTML = firstName;
			displayContacts("");
		}, false);
	</script>

</head>
<body>
	
	<header>
		<nav class="navbar navbar-expand-sm bg-light" id="nav">
			<div class="container-fluid">
				<!-- Logo and website name -->
				<ul class="navbar-nav flex-row">
					<li class="nav-item">
						<a href="contact.html" class="navbar-brand" style="color: rgb(75, 12, 102);">
							<img src="images/logo.png" alt="Logo" style="width:45px;" class="rounded-pill">
							cosmos
						</a>
					</li>
				</ul>
				<!-- First name and logout button -->
				<ul class="navbar-nav ms-auto">
					<li class="nav-item navbar-text">
						<span id="navUser" style="color: rgb(75, 12, 102);">User</span>
					</li>
					<li class="nav-item">
						<button class="btn" type="button" id="logoutButton" onclick="doLogout();">
							<span class="material-symbols-outlined">logout</span>
							Log out
						</button>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<div id="accessUIDiv" class="justify-content-center" style="background-color: transparent;">
			<div class="container justify-content-center" style="margin-top: 1cm;">
				<!-- <h1 id="contactsTitle" class="container text-light">Contacts</h1> -->

				<div id="searchAddBar" class="nav d-flex bg-light">
					<div class="nav-item p-2 flex-grow-1 ms-2" style="text-align: start;">
						<button id="addBtn" type="button" 
						class="btn btn-outline-dark rounded-pill searchAddItems" data-bs-toggle="modal" data-bs-target="#addModal">+ Add</button>
					</div>
					<div class="nav-item p-2">
						<div class="input-group">
							<input id="searchText" type="search" placeholder="Enter contact information" class="form-control searchAddItems" style="border: 1px solid black">
							<button id="searchBtn" class="btn btn-outline-dark searchAddItems" type="submit" 
							onclick="searchContacts();">
								Search
							</button>
						</div>
					</div>
					<div class="nav-item p-2 me-2">
						<button id="clearBtn" type="button" class="btn btn-outline-dark rounded-pill searchAddItems" 
						onclick="displayContacts(''); document.getElementById('searchText').innerHTML = '';">
							Clear
						</button>
					</div>
				</div>

				<!-- Add contacts dialogue box. -->
				<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
					  <div class="modal-content">
						<div class="modal-header">
						  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
						  <button type="button" class="close" aria-label="Close" onclick="closeModalForm('addModal', 'addForm');">
							<span aria-hidden="true">&times;</span>
						  </button>
						</div>
						<div class="modal-body">
							<form id="addForm">
								<div class="mb-3">
									<label for="addFname" class="form-label">First name</label>
									<input id="addFname" type="text" placeholder="First name" class="form-control" 
									oninput="this.value = formatName(this.value);" required>
									<div class="invalid-feedback">Required.</div>
								</div>
								<div class="mb-3">
									<label for="addLname" class="form-label">Last name</label>
									<input id="addLname" type="text" placeholder="Last name" class="form-control" 
									oninput="this.value = formatName(this.value);">
								</div>
								<div class="mb-3">
									<label for="addPhNum" class="form-label">Phone number</label>
									<input id="addPhNum" type="tel" placeholder="ex. 555-555-5555" class="form-control" required>
									<div id="addPhNum-feedback" class="invalid-feedback">Valid phone number required.</div>
								</div>
								<div class="mb-3">
									<label for="addEmail" class="form-label">Email</label>
									<input id="addEmail" type="email" placeholder="ex. example@email.com" class="form-control"
									oninput="this.value = this.value.toLowerCase();" required>
									<div id="addEmail-feedback" class="invalid-feedback">Valid email address required.</div>
								</div>
							</form>
						</div>
						<div class="modal-footer">
						  <button type="button" class="btn btn-outline-primary" onclick="closeModalForm('addModal', 'addForm');">
							Close
						  </button>
						  <button type="submit" class="btn btn-primary"
						  onclick="
						  if(validateContactForm('addForm', 'addPhNum', 'addEmail')) 
						  {
							addContact(); 
							closeModalForm('addModal', 'addForm');
						  }">
						  	Submit
						</button>
						</div>
					  </div>
					</div>
				  </div>
			</div>

			<!--Edit contacts-->
			<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
				  <div class="modal-content">
					<div class="modal-header">
					  <h5 class="modal-title" id="exampleModalLabel">Edit Contact</h5>
					  <button type="button" class="close" aria-label="Close" onclick="closeModalForm('editModal', 'editForm');">
						<span aria-hidden="true">&times;</span>
					  </button>
					</div>
					<div class="modal-body">
						<form id="editForm">
							<div class="mb-3">
								<label for="editFname" class="form-label">First name</label>
								<input id="editFname" type="text" placeholder="First name" class="form-control" 
								oninput="this.value = formatName(this.value);" required>
								<div class="invalid-feedback">Required.</div>
							</div>
							<div class="mb-3">
								<label for="editLname" class="form-label">Last name</label>
								<input id="editLname" type="text" placeholder="Last name" class="form-control" 
								oninput="this.value = formatName(this.value);">
							</div>
							<div class="mb-3">
								<label for="editPhNum" class="form-label">Phone number</label>
								<input id="editPhNum" type="tel" placeholder="ex. 555-555-5555" class="form-control" required>
								<div id="addPhNum-feedback" class="invalid-feedback">Valid phone number required.</div>
							</div>
							<div class="mb-3">
								<label for="editEmail" class="form-label">Email</label>
								<input id="editEmail" type="email" placeholder="ex. example@email.com" class="form-control"
								oninput="this.value = this.value.toLowerCase();" required>
								<div id="addEmail-feedback" class="invalid-feedback">Valid email address required.</div>
							</div>
						</form>
					</div>
					<div class="modal-footer">
					  <button type="button" class="btn btn-outline-primary" onclick="closeModalForm('editModal', 'editForm');">
						Close	
					  </button>
					  <button id ="updateButton" type="submit" class="btn btn-primary" onclick="console.log('dummy')">
						  Submit
					  </button>
					</div>
				  </div>
				</div>
			  </div>
		</div>

			<!-- Container for contacts -->
			<div id="contactsDisplay" class="container mt-3">
				<table id="contacts" class="table table-striped table-borderless overflow-hidden my-1">
					<thead>
						<tr>
							<th></th>
							<th>First&nbspName</th>
							<th>Last&nbspName</th>
							<th>Phone</th>
							<th>Email</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody id="contactsBody" class="container align-middle"></tbody>
				</table>
				<div id="noResultsContainer">
					<h3 id="noResultsTxt" class="text-center" style="display: none;">
						No results found
					</h3>
				</div>
			</div>

		</div>
	</main>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<title>Cosmos</title>
	<script type="text/javascript" src="js/code.js"></script>
	<link href="css/contact.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=DM+Sans" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Load in the contacts associated with the user. -->
	
	<script type="text/javascript">
		document.addEventListener('DOMContentLoaded', function()
		{
			readCookie();
			document.getElementById("navUser").innerHTML = firstName;
			loadContacts();
		}, false);
	</script>
</head>
<body>
	
	<header>
		<nav class="navbar navbar-expand-sm bg-light" id="nav">
			<div class="container-fluid">
				<!-- Logo and website name -->
				<ul class="navbar-nav flex-row">
					<li class="nav-item">
						<a href="contact.html" class="navbar-brand" style="color: rgb(75, 12, 102);">
							<img src="images/logo.png" alt="Logo" style="width:45px;" class="rounded-pill">
							cosmos
						</a>
					</li>
				</ul>
				<!-- First name and logout button -->
				<ul class="navbar-nav flex-row">
					<li class="nav-item" style="font-size: 17px;">
						<span id="navUser" class="me-2 mt-3">User</span>
						<!-- <span class="material-symbols-outlined" style="align-self: center;">logout</span>Log out -->
					</li>
					<li class="nav-item" style="font-size: 17px;">
						<button id="logoutBtn" class="nav-link" type="button" onclick="doLogout();">
							Log out
							<span class="material-symbols-outlined">logout</span>
						</button>
					</li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
		<div id="accessUIDiv" class="justify-content-center" style="background-color: transparent;">
			<div class="container justify-content-center" style="margin-top: 1cm;">
				<!-- <h1 id="contactsTitle" class="container text-light">Contacts</h1> -->

				<!-- Search and add navigation bar -->
				<ul id="searchAddBar" class="nav bg-light rounded-pill">
					<li class="nav-item mt-2 mb-1 ms-4">
						<button id="addBtn" type="button" 
						class="btn btn-outline-dark rounded-pill searchAddItems" data-bs-toggle="modal" data-bs-target="#addModal">+ Add</button>
					</li>
					<li class="nav-item mt-2 mb-1 me-4">
						<div class="input-group">
							<input id="searchBar" type="search" placeholder="Enter contact information" class="form-control searchAddItems" style="border: 1px solid black">
							<button id="searchBtn" class="btn btn-outline-dark searchAddItems" type="submit">Search</button>
						</div>
					</li>
				</ul>

				<!-- Add contacts dialogue box. -->
				<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
					  <div class="modal-content">
						<div class="modal-header">
						  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
						  <button type="button" class="close" aria-label="Close" onclick="closeModalForm('addModal', 'addForm');">
							<span aria-hidden="true">&times;</span>
						  </button>
						</div>
						<div class="modal-body">
							<form id="addForm">
								<div class="mb-3">
									<label for="addFname" class="form-label">First name</label>
									<input id="addFname" type="text" placeholder="First name" class="form-control" 
									oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1);" required>
									<div class="invalid-feedback">Required.</div>
								</div>
								<div class="mb-3">
									<label for="addLname" class="form-label">Last name</label>
									<input id="addLname" type="text" placeholder="Last name" class="form-control" 
									oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1);">
								</div>
								<div class="mb-3">
									<label for="addPhNum" class="form-label">Phone number</label>
									<input id="addPhNum" type="tel" placeholder="ex. 555-555-5555" class="form-control" required>
									<div id="addPhNum-feedback" class="invalid-feedback">Valid phone number required.</div>
								</div>
								<div class="mb-3">
									<label for="addEmail" class="form-label">Email</label>
									<input id="addEmail" type="email" placeholder="ex. example@email.com" class="form-control"
									oninput="this.value = this.value.toLowerCase();" required>
									<div id="addEmail-feedback" class="invalid-feedback">Valid email address required.</div>
								</div>
							</form>
						</div>
						<div class="modal-footer">
						  <button type="button" class="btn btn-outline-primary" onclick="closeModalForm('addModal', 'addForm');">
							Close
						  </button>
						  <button type="submit" class="btn btn-primary"
						  onclick="
						  if(validateContactForm('addForm', 'addPhNum', 'addEmail')) 
						  {
							addContact(); 
							closeModalForm('addModal', 'addForm');
						  }">
						  	Submit
						</button>
						</div>
					  </div>
					</div>
				  </div>
			</div>

			<!-- Modal -->

			<!-- Container for contacts -->
			<div id="contactsDisplay" class="container">
				<table class="table table-striped my-1">
					<thead>
						<tr>
							<th></th>
							<th>First&nbspName</th>
							<th>Last&nbspName</th>
							<th>Phone</th>
							<th>Email</th>
							<th></th>
							<th></th>
						</tr>
					</thead>
					<tbody id="contactsBody" class="container align-middle"></tbody>
				</table>
			</div>

		</div>
	</main>

</body>
</html>
